apiVersion: v1
kind: ConfigMap
metadata:
  name: common-config
  namespace: eatcloud
data:
  # Database Configuration - Service-specific
  # Each service has its own database instance
  ORDER_DB_HOST: "order-db"
  PAYMENT_DB_HOST: "payment-db"
  
  # For services that can share the main database
  DB_HOST: "eatcloud-db"
  DB_PORT: "5432"
  DB_USERNAME: "eatcloud_user"
  
  # Redis Configuration
  REDIS_HOST: "eatcloud-redis"
  REDIS_PORT: "6379"
  REDIS_TIMEOUT: "2000ms"
  REDIS_DATABASE: "0"
  REDIS_POOL_MAX_ACTIVE: "8"
  REDIS_POOL_MAX_IDLE: "8"
  REDIS_POOL_MIN_IDLE: "0"
  
  # Kafka Configuration
  SPRING_KAFKA_BOOTSTRAP_SERVERS: "kafka:9092"
  
  # Eureka Configuration
  EUREKA_CLIENT_SERVICE_URL_DEFAULTZONE: "http://eureka-server:8761/eureka"
  
  # Spring Profiles
  SPRING_PROFILES_ACTIVE: "k8s,dev"
  
  # Distributed Lock Configuration
  DISTRIBUTED_LOCK_TIMEOUT: "5"
  DISTRIBUTED_LOCK_RETRY_COUNT: "3"
  DISTRIBUTED_LOCK_RETRY_DELAY: "100"
  
  # Logging Configuration
  LOGGING_LEVEL_COM_EATCLOUD: "DEBUG"
  
  # JWT Configuration
  JWT_SECRET: "bL3eq0LvdqK92dOj+6cTVtzcEHTPf9+Utw7R+3T01lbXWvksn6FezIjaNVQgEGkD"
  SPRING_SECURITY_OAUTH2_RESOURCESERVER_JWT_JWK_SET_URI: "http://auth-service:8081/api/v1/auth/.well-known/jwks.json"
  
  # Mail Configuration
  SPRING_MAIL_HOST: "smtp.gmail.com"
  SPRING_MAIL_PORT: "587"
  SPRING_MAIL_USERNAME: "your-email@gmail.com"
  SPRING_MAIL_PROPERTIES_MAIL_SMTP_AUTH: "true"
  SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_ENABLE: "true"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: service-ports
  namespace: eatcloud
data:
  EUREKA_SERVER_PORT: "8761"
  API_GATEWAY_PORT: "8080"
  AUTH_SERVICE_PORT: "8081"
  CUSTOMER_SERVICE_PORT: "8082"
  ADMIN_SERVICE_PORT: "8083"
  MANAGER_SERVICE_PORT: "8084"
  STORE_SERVICE_PORT: "8085"
  ORDER_SERVICE_PORT: "8086"
  PAYMENT_SERVICE_PORT: "8087"
